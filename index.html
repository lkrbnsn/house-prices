<!DOCTYPE html>
<html>
<head>
  <title>Irish House Prices Today</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>


<body>

  <!-- Sidebar/menu -->
<!-- <nav class="w3-sidebar w3-bar-block w3-white w3-collapse w3-top" style="z-index:3;width:250px" id="mySidebar">
  <div class="w3-container w3-display-container w3-padding-16">
    <i onclick="w3_close()" class="fa fa-remove w3-hide-large w3-button w3-display-topright"></i>
    <h3 class="w3-wide"><b>LOGO</b></h3>
  </div>
  <div class="w3-padding-64 w3-large w3-text-grey" style="font-weight:bold">
    <a href="#" class="w3-bar-item w3-button">Shirts</a>
    <a href="#" class="w3-bar-item w3-button">Dresses</a>
    <a onclick="myAccFunc()" href="javascript:void(0)" class="w3-button w3-block w3-white w3-left-align" id="myBtn">
      Jeans <i class="fa fa-caret-down"></i>
    </a>
    <div id="demoAcc" class="w3-bar-block w3-hide w3-padding-large w3-medium">
      <a href="#" class="w3-bar-item w3-button w3-light-grey"><i class="fa fa-caret-right w3-margin-right"></i>Skinny</a>
      <a href="#" class="w3-bar-item w3-button">Relaxed</a>
      <a href="#" class="w3-bar-item w3-button">Bootcut</a>
      <a href="#" class="w3-bar-item w3-button">Straight</a>
    </div>
    <a href="#" class="w3-bar-item w3-button">Jackets</a>
    <a href="#" class="w3-bar-item w3-button">Gymwear</a>
    <a href="#" class="w3-bar-item w3-button">Blazers</a>
    <a href="#" class="w3-bar-item w3-button">Shoes</a>
  </div>
  <a href="#footer" class="w3-bar-item w3-button w3-padding">Contact</a> 
  <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding" onclick="document.getElementById('newsletter').style.display='block'">Newsletter</a> 
  <a href="#footer"  class="w3-bar-item w3-button w3-padding">Subscribe</a>
</nav> -->

<!-- Top menu on small screens -->
<!-- <header class="w3-bar w3-top w3-hide-large w3-black w3-xlarge">
  <div class="w3-bar-item w3-padding-24 w3-wide">LOGO</div>
  <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding-24 w3-right" onclick="w3_open()"><i class="fa fa-bars"></i></a>
</header> -->

<!-- Overlay effect when opening sidebar on small screens -->
<!-- <div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>
 -->

  <h1>Irish House Prices Today</h1>
  <h3>Daily data on how expensive houses are in Ireland</h3>

  <form>
    <label for="location">Location:</label>
    <select name="location" id="location">
      <option value='all'>All</option>
      <option value='antrim'>Antrim</option>
      <option value='armagh'>Armagh</option>
      <option value='cavan'>Cavan</option>
      <option value='carlow'>Carlow</option>
      <option value='clare'>Clare</option>
      <option value='cork'>Cork</option>
      <option value='derry'>Derry</option>
      <option value='down'>Down</option>
      <option value='donegal'>Donegal</option>
      <option value='dublin'>Dublin</option>
      <option value='fermanagh'>Fermanagh</option>
      <option value='galway'>Galway</option>
      <option value='kerry'>Kerry</option>
      <option value='kildare'>Kildare</option>
      <option value='kilkenny'>Kilkenny</option>
      <option value='laois'>Laois</option>
      <option value='mayo'>Mayo</option>
      <option value='meath'>Meath</option>
      <option value='monaghan'>Monaghan</option>
      <option value='leitrim'>Leitrim</option>
      <option value='limerick'>Limerick</option>
      <option value='longford'>Longford</option>
      <option value='louth'>Louth</option>
      <option value='offaly'>Offaly</option>
      <option value='roscommon'>Roscommon</option>
      <option value='sligo'>Sligo</option>
      <option value='tipperary'>Tipperary</option>
      <option value='tyrone'>Tyrone</option>
      <option value='waterford'>Waterford</option>
      <option value='westmeath'>Westmeath</option>
      <option value='wexford'>Wexford</option>
      <option value='wicklow'>Wicklow</option>

    </select>
    <label for="property_type">Property Type:</label>
    <select name="property_type" id="property_type">
      <option value="any">Any Property</option>
      <option value="houses">House</option>
      <option value="detached-houses">Detached House</option>
      <option value="semi-detached-houses">Semi-Detached House</option>
      <option value="terraced-houses">Terraced House</option>
      <option value="end-of-terrace-houses">End-of-Terrace House</option>
      <option value="townhouses">Townhouse</option>
      <option value="duplexes">Duplex</option>
      <option value="bungalows">Bungalow</option>
      <option value="apartments">Apartment</option>
      <option value="studio-apartments">Studio Apartment</option>
      <option value="sites">Site</option>
    </select>
    <br><br>
    <input type="submit" value="Show Prices">
  </form>

  &nbsp

  <div>
    <canvas id="distribution_chart" style="width:100%;max-width:600px"></canvas>
    <a id="message"></a>   
  </div>

  <div>
    <canvas id="trend_chart" style="width:100%;max-width:600px"></canvas>   
  </div>

  <p id="date">Data taken from <a href="https://daft.ie">daft.ie</a></p>

  <div class="footer">
    <p>Crafted with care in Ireland</p>
    <p>© 2023</p>
  </div> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  <script type="text/javascript" src="data/data.json"></script>
  <script>
    const obj = JSON.parse(data);

    // default to all
    let property_location = "all"
    let property_type = "any"
    let params = new URLSearchParams(window.location.search);

    if (params.get('location')) {
      // Make the dropdown sticky
      document.getElementById("location").value = params.get('location');
      property_location = params.get('location');
    }
    if (params.get('property_type')) {
      // Make the dropdown sticky
      document.getElementById("property_type").value = params.get('property_type');
      property_type = params.get('property_type');
    }

    document.getElementById("date").innerHTML = "Data taken from <a href=\"https://daft.ie\">daft.ie</a> on " + date;

    // Create human friendly strings
    let property_type_string = property_type.replace(/-/gi, " ");
    if (property_type_string == "any") {
      property_type_string = "properties";
    }
    let property_location_string = property_location.charAt(0).toUpperCase() + property_location.slice(1);
    if (property_location_string == "All") {
      property_location_string = "Ireland";
    }
    document.getElementById("message").innerHTML = "There are " + obj[property_location][property_type]["total"] + " " + property_type_string + " for sale in " + property_location_string + ", with an average asking price of €" + obj[property_location][property_type]["mean"];

    // Values we want to plot against
    var xValues = ["0-100", "100-200", "200-300", "300-400", "400-500", "500-600", "600-700", "700-800", "800-900", "900-1000", "1000+"];
    var yValues = obj[property_location][property_type]["bins"];

    new Chart("distribution_chart", {
      type: "bar",
      data: {
        labels: xValues,
        datasets: [{

          backgroundColor: "#92140C",
          borderWidth: 2,
          borderRadius: 5,
          borderSkipped: false,
          data: yValues

        }]
      },
      options: {
        responsive: true,
        legend: {display: false},
        title: {
          display: true,
          text: "Price Distribution"
        }
      }
    });

    var xValues = date_list;
    var yValues = obj[property_location][property_type]["seven_day"];

    new Chart("trend_chart", {
      type: "line",
      data: {
        labels: xValues,
        datasets: [{
          fill: false,
          backgroundColor: "#92140C",
          borderColor: "#92140C",
          data: yValues
        }]
      },
      options: {
        responsive: true,
        legend: {display: false},
        title: {
          display: true,
          text: "Average Price Trend"
        }
      }
    });

  </script>

</body>
</html>
