<!DOCTYPE html>
<html>
<head>
  <title>Irish House Prices Today</title>
  <link rel="stylesheet" href="style.css">
</head>


<body>

  <h1>Irish House Prices Today</h1>
  <h3>Daily data on how expensive houses are in Ireland</h3>

  <form>
    <label for="location">Location:</label>
    <select name="location" id="location">
      <option value='all'>All</option>
      <option value='antrim'>Antrim</option>
      <option value='armagh'>Armagh</option>
      <option value='cavan'>Cavan</option>
      <option value='carlow'>Carlow</option>
      <option value='clare'>Clare</option>
      <option value='cork'>Cork</option>
      <option value='derry'>Derry</option>
      <option value='down'>Down</option>
      <option value='donegal'>Donegal</option>
      <option value='dublin'>Dublin</option>
      <option value='fermanagh'>Fermanagh</option>
      <option value='galway'>Galway</option>
      <option value='kerry'>Kerry</option>
      <option value='kildare'>Kildare</option>
      <option value='kilkenny'>Kilkenny</option>
      <option value='laois'>Laois</option>
      <option value='mayo'>Mayo</option>
      <option value='meath'>Meath</option>
      <option value='monaghan'>Monaghan</option>
      <option value='leitrim'>Leitrim</option>
      <option value='limerick'>Limerick</option>
      <option value='longford'>Longford</option>
      <option value='louth'>Louth</option>
      <option value='offaly'>Offaly</option>
      <option value='roscommon'>Roscommon</option>
      <option value='sligo'>Sligo</option>
      <option value='tipperary'>Tipperary</option>
      <option value='tyrone'>Tyrone</option>
      <option value='waterford'>Waterford</option>
      <option value='westmeath'>Westmeath</option>
      <option value='wexford'>Wexford</option>
      <option value='wicklow'>Wicklow</option>

    </select>
    <label for="property_type">Property Type:</label>
    <select name="property_type" id="property_type">
      <option value="any">Any Property</option>
      <option value="houses">House</option>
      <option value="detached-houses">Detached House</option>
      <option value="semi-detached-houses">Semi-Detached House</option>
      <option value="terraced-houses">Terraced House</option>
      <option value="end-of-terrace-houses">End-of-Terrace House</option>
      <option value="townhouses">Townhouse</option>
      <option value="duplexes">Duplex</option>
      <option value="bungalows">Bungalow</option>
      <option value="apartments">Apartment</option>
      <option value="studio-apartments">Studio Apartment</option>
      <option value="sites">Site</option>
    </select>
    <br><br>
    <input type="submit" value="Show Prices">
  </form>

  <canvas id="myChart" style="width:100%;max-width:600px"></canvas>

  <p>Data taken from <a href="https://daft.ie">daft.ie</a> on 30-01-2023</p>

  <div class="footer">
    <p>Crafted with care in Ireland</p>
    <p>Â© 2023</p>
  </div> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  <script type="text/javascript" src="data.json"></script>
  <script>

  const obj = JSON.parse(data);

  // function setAction(form) {
  // }

  let params = new URLSearchParams(window.location.search);

  // Make the dropdown forms sticky
  if (params.get('location')) {
    document.getElementById("location").value = params.get('location');
  }
  if (params.get('property_type')) {
    document.getElementById("property_type").value = params.get('property_type');
    // Select the right data from the json file
    var yValues = obj[params.get('location')][params.get('property_type')];
  }



  // Values we want to plot against
  var xValues = ["200-225", "225-250", "250-275", "275-300", "300-325", "325-350", "350-375", "375-400", "400-425", "425-450", "450-475", "475-500", "500-525", "525-550", "550-575"];
  // var yValues = [18, 37, 44, 42, 28];
  // var barColors = ["red", "green","blue","orange","brown"];

  var yValues = obj[params.get('location')][params.get('property_type')];
  // if (params.get('property_type') == "houses") {
  //   var yValues = obj["carlow"]["any"];
  // }

  new Chart("myChart", {
    type: "bar",
    data: {
      labels: xValues,
      datasets: [{

        backgroundColor: "#92140C",
        borderWidth: 2,
        borderRadius: 5,
        borderSkipped: false,
        data: yValues

      }]
    },
    options: {
      responsive: true,
      legend: {display: false},
      title: {
        display: true,
        text: "House Prices"
      }
    }
  });
  </script>

</body>
</html>
